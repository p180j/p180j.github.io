{"meta":{"title":"KeepGoing博客","subtitle":null,"description":null,"author":"Keep Going","url":"http://yoursite.com"},"pages":[],"posts":[{"title":"随笔-生活","slug":"spring的Quartz配置","date":"2018-04-21T14:54:11.000Z","updated":"2018-04-24T10:38:58.620Z","comments":true,"path":"2018/04/21/spring的Quartz配置/","link":"","permalink":"http://yoursite.com/2018/04/21/spring的Quartz配置/","excerpt":"","text":"概念: 1、Job 表示一个工作，要执行的具体内容。此接口中只有一个方法 void execute(JobExecutionContext context)2、JobDetail JobDetail表示一个具体的可执行的调度程序，Job是这个可执行程调度程序所要执行的内容，另外JobDetail还包含了这个任务调度的方案和策略。3、Trigger代表一个调度参数的配置，什么时候去调。4、Scheduler代表一个调度容器，一个调度容器中可以注册多个JobDetail和Trigger。当Trigger与JobDetail组合，就可以被Scheduler容器调度了。第一种：任务类继承QuartzJobBean 配置代码 &lt;!–方式一：使用JobDetailBean，任务类必须实现Job接口 –&gt; &lt;bean id=“myjob” class=“org.springframework.scheduling.quartz.JobDetailBean”&gt; &lt;property name=“name” value=“exampleJob”&gt;&lt;/property&gt; &lt;property name=“jobClass” value=“com.ncs.hj.SpringQtz”&gt;&lt;/property&gt; &lt;property name=“jobDataAsMap”&gt; &lt;map&gt; &lt;entry key=“service”&gt;&lt;value&gt;simple is the beat&lt;/value&gt;&lt;/entry&gt; &lt;/map&gt; &lt;/property&gt; &lt;/bean&gt; 1234567891012345678910Java代码： public class SpringQtz extends QuartzJobBean{ private static int counter = 0; protected void executeInternal(JobExecutionContext context) throws JobExecutionException { long ms = System.currentTimeMillis(); System.out.println(“\\t\\t” + new Date(ms)); System.out.println(ms); System.out.println(“(“ + counter++ + “)”); String s = (String) context.getMergedJobDataMap().get(“service”); System.out.println(s); System.out.println(); } 12345678910111234567891011第二种：在配置文件里定义任务类和要执行的方法，类和方法仍然是普通类 配置文件： &lt;!– 方式二：使用MethodInvokingJobDetailFactoryBean，任务类可以不实现Job接口，通过targetMethod指定调用方法–&gt; &lt;!– 定义目标bean和bean中的方法 –&gt; &lt;bean id=“SpringQtzJob” class=“com.ncs.hj.SpringQtz”/&gt; &lt;bean id=“SpringQtzJobMethod” class=“org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean”&gt; &lt;property name=“targetObject”&gt; &lt;ref bean=“SpringQtzJob”/&gt; &lt;/property&gt; &lt;property name=“targetMethod”&gt; &lt;!– 要执行的方法名称 –&gt; &lt;value&gt;execute&lt;/value&gt; &lt;/property&gt; &lt;/bean&gt; 12345678910111234567891011JAVA代码： public class SpringQtz { private static int counter = 0; protected void execute() { long ms = System.currentTimeMillis(); System.out.println(“\\t\\t” + new Date(ms)); System.out.println(“(“ + counter++ + “)”); } } 1234567812345678&lt;– 共用的xml部分 –&gt;&lt;!– ======================== 调度触发器============ –&gt;&lt;bean id=“CronTriggerBean” class=“org.springframework.scheduling.quartz.CronTriggerBean”&gt; &lt;property name=“jobDetail” ref=“SpringQtzJobMethod”&gt;&lt;/property&gt; &lt;property name=“cronExpression” value=“0/5 ?”&gt;&lt;/property&gt;&lt;/bean&gt;&lt;!– ======================== 调度工厂 ================ –&gt;&lt;bean id=“SpringJobSchedulerFactoryBean” class=“org.springframework.scheduling.quartz.SchedulerFactoryBean”&gt; &lt;property name=“triggers”&gt; &lt;list&gt; &lt;ref bean=“CronTriggerBean”/&gt; &lt;/list&gt; &lt;/property&gt;&lt;/bean&gt; 12345678910111213141234567891011121314 $(function () { $(‘pre.prettyprint code’).each(function () { var lines = $(this).text().split(‘\\n’).length; var $numbering = $(‘‘).addClass(‘pre-numbering’).hide(); $(this).addClass(‘has-numbering’).parent().append($numbering); for (i = 1; i &lt;= lines; i++) { $numbering.append($(‘‘).text(i)); }; $numbering.fadeIn(1700); }); });","categories":[],"tags":[{"name":"spring","slug":"spring","permalink":"http://yoursite.com/tags/spring/"},{"name":"Quartz","slug":"Quartz","permalink":"http://yoursite.com/tags/Quartz/"}]},{"title":"随笔-生活","slug":"随笔-生活","date":"2018-04-21T14:54:11.000Z","updated":"2018-04-24T09:54:28.191Z","comments":true,"path":"2018/04/21/随笔-生活/","link":"","permalink":"http://yoursite.com/2018/04/21/随笔-生活/","excerpt":"今天是周末，跟朋友在自己住的地方弄了一点火锅吃。","text":"今天是周末，跟朋友在自己住的地方弄了一点火锅吃。第一次自己在住的地方吃火锅，很开心跟朋友。","categories":[],"tags":[{"name":"随笔","slug":"随笔","permalink":"http://yoursite.com/tags/随笔/"}]},{"title":"你好，欢迎访问我的第一个博客","slug":"你好，欢迎访问我的博客","date":"2018-04-18T14:54:11.000Z","updated":"2018-04-21T15:46:58.507Z","comments":true,"path":"2018/04/18/你好，欢迎访问我的博客/","link":"","permalink":"http://yoursite.com/2018/04/18/你好，欢迎访问我的博客/","excerpt":"","text":"您好，欢迎访问我的第一个博客！","categories":[],"tags":[]}]}